{% extends "base.html" %}

{% block title %}Revoke Primary QMS Authority{% endblock %}

{% block content %}
<div class="cozy-bg-fixed">
  <div class="cozy-main-blur py-5">

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-6">

          <div class="qms-card border-danger p-4 p-md-5">

            <!-- Header -->
            <div class="mb-4">
              <span class="cozy-text-subtitle text-danger">
                Governance Action
              </span>

              <h2 class="mt-2 mb-1 text-danger">
                <i class="fa-solid fa-ban me-2"></i>
                Revoke Primary QMS Authority
              </h2>

              <p class="qms-muted mb-0">
                This action removes governance-level authority
                within the Quality Management System.
              </p>
            </div>

            <!-- Warning -->
            <div class="alert alert-danger">
              <i class="fa-solid fa-triangle-exclamation me-2"></i>
              <strong>Irreversible action.</strong>
              This change is permanently recorded and cannot be undone.
            </div>

            <!-- Subject -->
            <div class="mb-4">
              <p class="mb-2">
                You are about to revoke <strong>Primary QMS Authority</strong> from:
              </p>

              <div class="bg-dark rounded p-3 border border-secondary">
                <div>
                  <strong>User:</strong>
                  {{ authority.user.get_full_name|default:authority.user.username }}
                </div>
                <div class="text-muted small">
                  {{ authority.user.email }}
                </div>
              </div>
            </div>

            <!-- Form -->
            <form method="post">
              {% csrf_token %}

              <div class="mb-4">
                <label class="form-label">
                  Reason for revocation
                </label>
                <textarea
                  name="reason"
                  class="form-control"
                  rows="4"
                  placeholder="Provide a clear governance reason for this revocation"
                  required
                ></textarea>
                <div class="form-text text-muted">
                  This explanation will be retained as part of the permanent audit record.
                </div>
              </div>

              <!-- Actions -->
              <div class="d-flex justify-content-between align-items-center">
                <a href="{% url 'qms_primary_list' %}" class="btn btn-outline-light">
                  <i class="fa-solid fa-arrow-left me-2"></i>
                  Cancel
                </a>

                <button type="submit" class="btn btn-danger">
                  <i class="fa-solid fa-ban me-2"></i>
                  Confirm Revocation
                </button>
              </div>
            </form>

          </div>

        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
